<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="initial-scale=1.0,user-scalable=no,width=device-width">
    <style type="text/css">
      body,html,#container{
        height: 100%;
        margin: 0;
      }

    </style>
    <title>我的地图</title>
  </head>
  <body>
    <div id="container" tabindex="0"></div>
    <script type="text/javascript" src="https://webapi.amap.com/maps?v=1.3&key=35b86c43d7c85cff6285ce9f6987062a"></script>
    <script type="text/javascript">
      var map = new AMap.Map('container');
      map.plugin(['AMap.ToolBar','AMap.Scale','AMap.CitySearch'],function(){
        // 工具条
        var toolBar = new AMap.ToolBar();
        map.addControl(toolBar);
        // 比例尺
        var scale = new AMap.Scale();
        map.addControl(scale);
      })

      map.plugin('AMap.Geolocation',function(){
        var geolocation = new AMap.Geolocation({
          enableHighAccuracy: true,//高精度
          timeout: 10000,//超时
          noIpLocate: 0,//0：可以使用IP定位；1：手机设备废除IP定位；2：PC废除IP定位；3：所有终端禁止使用IP定位
          noGeoLocation: 0,//like up
          GeoLocationFirst: false,//浏览器定位首选
          maximumAge: 0,
          convert: true,
          showButton: true,
          buttonPosition: 'RB',
          markerOptions: true,
          zoomToAccuracy: true,
        });
        map.addControl(geolocation);
        geolocation.getCurrentPosition();
        AMap.event.addListener(geolocation, 'complete', onComplete);//返回定位信息
        AMap.event.addListener(geolocation, 'error', onError);      //返回定位出错信息
      })
    </script>
  </body>
</html>
